<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì‚¬ìš©ì í˜ì´ì§€</title>
</head>
<body>
  <h1>ğŸ‘¤ User Dashboard</h1>
  <p>í™˜ì˜í•©ë‹ˆë‹¤, ì¼ë°˜ ì‚¬ìš©ìë‹˜!</p>
  <button id="logout">ë¡œê·¸ì•„ì›ƒ</button>

  <script>
    // 1) í† í° ê²€ì‚¬
    const token = localStorage.getItem("token");
    if (!token) {
      alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
      location.href = "/index.html";
    }

    // 2) ì—­í•  í™•ì¸ (í† í°ì—ì„œ ì§ì ‘ decodeí•´ë„ ë˜ê³ , /auth/me ê°™ì€ ì—”ë“œí¬ì¸íŠ¸ë¥¼ í˜¸ì¶œí•´ë„ ë©ë‹ˆë‹¤)
    const payload = JSON.parse(atob(token.split(".")[1]));
    if (payload.role !== "user") {
      alert("ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
      location.href = "/index.html";
    }

    // 3) ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼
    document.getElementById("logout").onclick = () => {
      localStorage.removeItem("token");
      location.href = "/index.html";
    };
  </script>
</body>
</html>
