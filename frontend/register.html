<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>회원가입 | 뉴뮤직 예약 시스템</title>
  <link rel="stylesheet" href="css/common.css?v=20250905">
  <link rel="stylesheet" href="css/consent-modal.css?v=20250905"><!-- 모달 전용 -->
  <style>
    /* 동의 영역 스타일 보정 */
    .consent-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 12px 0 20px;
      flex-wrap: wrap;
      font-size: 14px;
    }
    .consent-row input[type="checkbox"] {
      width: 16px;
      height: 16px;
    }
    .consent-row label {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .consent-row .linklike {
      margin: 0 4px;
    }
    small.hint.error {
      color: #b00020 !important;
    }
  </style>
</head>
<body>
  <!-- 헤더 -->
  <header>
    <img src="images/dku-logo.png" alt="DKU Logo">
    <div class="title">
      <h1>단국대학교 뉴뮤직학부</h1>
      <p>Dankook University New Music</p>
    </div>
  </header>

  <!-- 중앙 카드 -->
  <div class="main-container">
    <div class="card reg-card">
      <div class="reg-box">
        <h2>회원가입</h2>

        <form id="regForm" novalidate>
          <label>
            Login ID
            <input
              name="login_id"
              required
              minlength="2"
              maxlength="50"
              pattern="^[A-Za-z~!@#$%^&*()_+\-={}[\]|\\:;&quot;',.<>/?`]+$"
              autocomplete="username"
            />
            <small class="hint">영문/숫자/특수문자만 사용 가능, 최소 2자</small>
          </label>

          <label>
            Password
            <input
              type="password"
              name="password"
              required
              minlength="8"
              pattern="^[A-Za-z~!@#$%^&*()_+\-={}[\]|\\:;&quot;',.<>/?`]+$"
              autocomplete="new-password"
            />
            <small class="hint">영문/숫자/특수문자만 사용 가능, 8자 이상</small>
          </label>

          <label>
            Username
            <input
              name="username"
              required
              minlength="1"
              maxlength="100"
              pattern="^[A-Za-z\uAC00-\uD7A3\s]+$"
              placeholder="예) 이종하"
            />
            <small class="hint">한글 또는 영문만</small>
          </label>

          <label>
            Student ID
            <input
              name="student_id"
              required
              inputmode="numeric"
              pattern="^\d{8}$"
              maxlength="8"
              placeholder="예) 20251234"
            />
            <small class="hint">숫자 8자리</small>
          </label>

          <label>
            Major
            <select name="major" required>
              <option value="" disabled selected>전공을 선택하세요</option>
              <option value="뮤직테크놀러지&컴퓨터음악작곡">뮤직테크놀러지&컴퓨터음악작곡</option>
              <option value="싱어송라이터전공">싱어송라이터전공</option>
              <option value="재즈퍼포먼스전공">재즈퍼포먼스전공</option>
            </select>
          </label>

          <label>
            Phone
            <input
              type="tel"
              name="phone"
              pattern="^010-\d{4}-\d{4}$"
              placeholder="010-1234-5678"
              autocomplete="tel"
            />
          </label>

          <!-- 동의 영역 -->
          <div class="consent-row">
            <!-- 첫 줄: 체크박스 + (필수) -->
            <label class="consent-check">
              <input type="checkbox" id="consentRequired" disabled />
              (필수)
            </label>

            <!-- 둘째 줄: 버튼 + 문구 -->
            <div class="consent-text">
              <button type="button" class="linklike" id="openConsent">개인정보 수집 및 이용 동의</button>
              에 동의합니다.
            </div>
          </div>






          <button type="submit" id="submitBtn">가입하기</button>
        </form>

        <pre id="result" aria-live="polite"></pre>
      </div>
    </div>
  </div>

  <!-- 동의서 모달 -->
  <div class="modal" id="consentModal" aria-hidden="true" role="dialog" aria-labelledby="consentTitle">
    <div class="modal-backdrop" data-close></div>
    <div class="modal-content" role="document">
      <header class="modal-header">
        <h3 id="consentTitle">개인정보 수집 및 이용 동의서</h3>
        <button class="modal-close" type="button" aria-label="닫기" data-close>&times;</button>
      </header>
      <div class="modal-body">
        <div class="agreement">
          <p><strong>1) 수집·이용 목적</strong><br>
          뉴뮤직 학부 연습실 예약 시스템(NM) 회원관리, 예약 생성/변경/취소 처리, 사용자 본인확인, 공지사항 안내</p>
          <p><strong>2) 수집 항목(필수)</strong><br>
          로그인ID, 비밀번호(서버 저장 시 암호화), 성명, 학번, 전공, 전화번호</p>
          <p><strong>3) 보유·이용 기간</strong><br>
          회원 탈퇴 시까지 또는 관계 법령에 따른 보존기간 동안 보관 후 지체 없이 파기합니다. 단, 서비스 운영 기록(예약/접속 로그 등)은 분쟁 대비 및 시스템 보안 목적상 별도 보관될 수 있습니다.</p>
          <p><strong>4) 제3자 제공/위탁</strong><br>
          원칙적으로 제3자에게 제공하지 않습니다. 서비스 운영 및 유지보수를 위해 필요한 경우에 한하여 관련 법령에 따라 위탁/제공될 수 있으며, 이 경우 사전에 고지합니다.</p>
          <p><strong>5) 동의 거부 권리 및 불이익</strong><br>
          귀하는 개인정보 수집·이용에 대한 동의를 거부할 권리가 있으나, 이 경우 서비스 이용(회원가입/예약)이 제한될 수 있습니다.</p>
          <p class="muted">버전: v1.0 · 고지일: 2025-09-03 · 관리자: 뉴뮤직 학부</p>
        </div>
      </div>
      <footer class="modal-footer">
        <button type="button" id="agreeBtn">동의합니다</button>
        <button type="button" class="secondary" data-close>닫기</button>
      </footer>
    </div>
  </div>

  <!-- 회원가입 로직 -->
  <script src="js/register.js?v=20250905" defer></script>
  <script src="js/consent-modal.js?v=20250905" defer></script>
</body>
</html>
